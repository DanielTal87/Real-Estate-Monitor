# ============================================================================
# Real Estate Monitor - Configuration File
# ============================================================================
# Copy this file to .env and customize the values below
# Command: cp .env.example .env
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# SQLite database file location (relative to project root)
DATABASE_URL=sqlite:///./real_estate.db

# ============================================================================
# SCRAPING INTERVALS (in minutes)
# ============================================================================
# How often to scrape each source
# Recommended: 15-30 minutes to avoid rate limiting
SCRAPING_INTERVAL_MINUTES=15
YAD2_INTERVAL_MINUTES=15
MADLAN_INTERVAL_MINUTES=15
FACEBOOK_INTERVAL_MINUTES=20

# ============================================================================
# TELEGRAM NOTIFICATIONS (Optional)
# ============================================================================
# Leave empty to disable Telegram notifications
#
# To set up:
# 1. Message @BotFather on Telegram
# 2. Send /newbot and follow instructions
# 3. Copy the bot token below
# 4. Message your bot, then visit:
#    https://api.telegram.org/bot<YOUR_TOKEN>/getUpdates
# 5. Find your chat_id in the response
#
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ============================================================================
# WEB DASHBOARD
# ============================================================================
# Dashboard will be available at http://DASHBOARD_HOST:DASHBOARD_PORT
DASHBOARD_HOST=127.0.0.1
DASHBOARD_PORT=8000

# ============================================================================
# SEARCH FILTERS - RENTAL APARTMENTS
# ============================================================================
# Customize these for your apartment search

# Cities to search (comma-separated, Hebrew names)
# Common cities: תל אביב-יפו, רמת גן, גבעתיים, הרצליה, רמת השרון, פתח תקווה
CITIES=תל אביב-יפו,רמת גן,גבעתיים

# Maximum monthly rent (in ILS)
MAX_PRICE=8000

# Minimum number of rooms (e.g., 2.5 = 2.5 rooms)
MIN_ROOMS=2.5

# Minimum apartment size (in square meters)
MIN_SIZE_SQM=65

# ============================================================================
# SEARCH FILTERS - BUYING APARTMENTS (Alternative Configuration)
# ============================================================================
# Uncomment and modify these if searching to buy instead of rent:
#
# CITIES=תל אביב-יפו,רמת גן,גבעתיים,הרצליה
# MAX_PRICE=2500000
# MIN_ROOMS=3
# MIN_SIZE_SQM=75

# ============================================================================
# HIGH PRIORITY NEIGHBORHOODS
# ============================================================================
# Neighborhoods that will trigger notifications even with lower deal scores
# Comma-separated, Hebrew names
#
# Tel Aviv examples: רמת אביב, בבלי, יד אליהו, נווה אביבים, פלורנטין
# Ramat Gan examples: בורסה, קריית קריניצי
HIGH_PRIORITY_NEIGHBORHOODS=רמת אביב,בבלי,יד אליהו

# ============================================================================
# DEAL BREAKERS (Hard Requirements)
# ============================================================================
# Listings that don't meet these criteria will be filtered out

# Exclude ground floor apartments (true/false)
EXCLUDE_GROUND_FLOOR=true

# Require elevator for apartments above this floor (0 to disable)
# Example: 2 means apartments on floor 3+ must have elevator
REQUIRE_ELEVATOR_ABOVE_FLOOR=2

# Require parking (true/false)
REQUIRE_PARKING=false

# Require Mamad/safe room (true/false)
REQUIRE_MAMAD=false

# ============================================================================
# PREFERENCES (Affects Deal Score)
# ============================================================================
# These don't filter out listings, but affect the deal score calculation
# Higher scores for listings that match your preferences

# Prefer apartments with balcony
PREFER_BALCONY=true

# Prefer apartments with parking
PREFER_PARKING=true

# Prefer apartments with elevator
PREFER_ELEVATOR=true

# Prefer apartments on top floors
PREFER_TOP_FLOORS=true

# Prefer apartments with Mamad/safe room
PREFER_MAMAD=true

# ============================================================================
# NOTIFICATION THRESHOLDS
# ============================================================================
# Control when you receive Telegram notifications

# Minimum deal score to trigger notification (0-100)
# Recommended: 75-85 for high-quality matches only
MIN_DEAL_SCORE_NOTIFY=80

# Minimum price drop percentage to trigger notification
# Example: 3 means notify when price drops by 3% or more
MIN_PRICE_DROP_PERCENT_NOTIFY=3

# ============================================================================
# FACEBOOK MARKETPLACE (Advanced)
# ============================================================================
# Facebook requires authentication via cookies
#
# To set up:
# 1. Install "Cookie Editor" browser extension
# 2. Login to Facebook
# 3. Export cookies as JSON
# 4. Save as facebook_cookies.json in project root
#
FACEBOOK_COOKIES_FILE=facebook_cookies.json

# ============================================================================
# PERSISTENT BROWSER MODE (Anti-Bot Protection)
# ============================================================================
# Chrome remote debugging port for persistent browser connection
# The scraper will connect to an existing Chrome instance instead of launching new ones
CHROME_DEBUG_PORT=9222

# Chrome user data directory (separate profile for the bot)
# Use ~ for home directory, will be expanded automatically
CHROME_USER_DATA_DIR=~/chrome_bot_profile

# Run browser in headless mode (not recommended for CAPTCHA solving)
HEADLESS=false

# ============================================================================
# SCRAPING BEHAVIOR
# ============================================================================
# Maximum number of scrolls per page to load dynamic content
DEFAULT_MAX_SCROLLS=5

# Wait time range after each scroll (in seconds)
# Random delay between min and max to appear human-like
MIN_WAIT_AFTER_SCROLL=2
MAX_WAIT_AFTER_SCROLL=5

# ============================================================================
# RETRY LOGIC
# ============================================================================
# Maximum number of retry attempts for failed scrapes
SCRAPER_MAX_RETRIES=3

# Delay between retry attempts (in seconds)
RETRY_DELAY_SECONDS=60

# ============================================================================
# CAPTCHA HANDLING
# ============================================================================
# How often to check if CAPTCHA is solved (in seconds)
CAPTCHA_CHECK_INTERVAL=30

# Maximum time to wait for CAPTCHA resolution before aborting (in minutes)
CAPTCHA_TIMEOUT_MINUTES=30

# ============================================================================
# NOTIFICATION LOGIC
# ============================================================================
# Minimum deal score to trigger notifications (overrides MIN_DEAL_SCORE_NOTIFY)
# This is the new unified setting for notification threshold
MIN_DEAL_SCORE_FOR_NOTI=80

# ============================================================================
# LOGGING
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file location (relative to project root)
LOG_FILE=real_estate_monitor.log

# ============================================================================
# QUICK START CONFIGURATIONS
# ============================================================================
# Copy one of these complete configurations based on your needs:

# --- RENTAL: Tel Aviv Student (Budget) ---
# CITIES=תל אביב-יפו
# MAX_PRICE=5000
# MIN_ROOMS=2
# MIN_SIZE_SQM=50
# EXCLUDE_GROUND_FLOOR=false
# REQUIRE_ELEVATOR_ABOVE_FLOOR=0
# REQUIRE_PARKING=false

# --- RENTAL: Tel Aviv Young Professional ---
# CITIES=תל אביב-יפו,רמת גן
# MAX_PRICE=7000
# MIN_ROOMS=2.5
# MIN_SIZE_SQM=65
# EXCLUDE_GROUND_FLOOR=true
# REQUIRE_ELEVATOR_ABOVE_FLOOR=2
# REQUIRE_PARKING=false
# HIGH_PRIORITY_NEIGHBORHOODS=רמת אביב,בבלי,נווה צדק

# --- RENTAL: Family (3+ rooms) ---
# CITIES=תל אביב-יפו,רמת גן,גבעתיים,הרצליה
# MAX_PRICE=10000
# MIN_ROOMS=3.5
# MIN_SIZE_SQM=85
# EXCLUDE_GROUND_FLOOR=true
# REQUIRE_ELEVATOR_ABOVE_FLOOR=1
# REQUIRE_PARKING=true
# REQUIRE_MAMAD=true

# --- BUYING: First Apartment ---
# CITIES=תל אביב-יפו,רמת גן,גבעתיים
# MAX_PRICE=2000000
# MIN_ROOMS=2.5
# MIN_SIZE_SQM=65
# EXCLUDE_GROUND_FLOOR=true
# REQUIRE_ELEVATOR_ABOVE_FLOOR=2
# PREFER_PARKING=true

# --- BUYING: Family Apartment ---
# CITIES=תל אביב-יפו,רמת גן,גבעתיים,הרצליה,רמת השרון
# MAX_PRICE=3500000
# MIN_ROOMS=4
# MIN_SIZE_SQM=100
# EXCLUDE_GROUND_FLOOR=true
# REQUIRE_ELEVATOR_ABOVE_FLOOR=1
# REQUIRE_PARKING=true
# REQUIRE_MAMAD=true
